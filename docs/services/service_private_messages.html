<!DOCTYPE html>
<html lang='ru'>
<head>
<title>
services\service_private_messages
</title>
<link rel="stylesheet" type="text/css" href="../styles.css">
</head>
<body>
<div id="content">
<h1>Сервис private_messages()</h1>
<h2>Описание</h2>
<p>В этой службе реализован простейший механизм обмена личными сообщениями наподобии чата.
Сообщения передаются напрямую от узла к узлу по сетевым транспортным протоколам в зашифрованном виде.
Для идентификации получателя сообщения может быть использован его IDURL адрес или никнейм -
он указывается при создании identity файла пользователя и может быть изменен в любой момент.</p>
<p>Автомат <code>nickname_holder()</code> предназначен для хранения и обновления никнейма пользователя в DHT сети,
его экземпляр создается при старте сервиса <code>private_messages()</code>.
Он создает запись в хэш-таблице для сопоставления никнейма и IDURL пользоватля.</p>
<p>Реализован простейший метод хранения таких коротких идентификаторов, но в нем реализован механизм
разрешения конфликтов имен, поскольку два разных пользователи могут указать одинаковый никнейм.
Автомат добавляет к никнейму числовой порядковый номер при записи в хэш-таблицу, но предварительно
сканирует ее и определяет наличие других таких же никнеймов, уже созданных другмими пользователями.</p>
<p>Для глобального поиска создается экземпляр автомата <code>nickname_observer()</code>, он сканирует
DHT сеть и возвращает список всех пользователей, которые указали заданный никнейм.
Пользователь, производящий поиск собеседника, может выбрать нужного адресата и начать переписку.</p>
<p>Личная переписка пользователя хранится на жестком диске в подпапке <code>.bitpie/messages/</code>.
Сервис <code>private_messages()</code> находится в разработке и его функционал будет расширен в будущем.</p>
<p>При выключении данного сервиса, будет удален экземпляр автомата <code>nickname_holder()</code> и
прекращен обмен личными сообщениями с другими пользователями в сети BitDust.</p>
<h2>Зависит от</h2>
<ul>
<li><a href="../services/service_gateway.html">gateway()</a></li>
<li><a href="../services/service_entangled_dht.html">entangled_dht()</a></li>
</ul>
<h2>Запуск автоматов</h2>
<ul>
<li><a href="../chat/nickname_holder.html">nickname_holder()</a></li>
<li><a href="../chat/nickname_observer.html">nickname_observer()</a></li>
</ul>
<h2>Настройки сервиса</h2>
<ul>
<li>services/private-messages/enabled - включение/выключение сервиса <code>private_messages()</code></li>
</ul>
<h2>Связанные файлы проекта</h2>
<ul>
<li><a href="http://gitlab.bitdust.io/devel/bitpie.devel/blob/master/services/service_private_messages.py">services/service_private_messages.py</a></li>
<li><a href="http://gitlab.bitdust.io/devel/bitpie.devel/blob/master/chat/nickname_holder.py">chat/nickname_holder.py</a></li>
<li><a href="http://gitlab.bitdust.io/devel/bitpie.devel/blob/master/chat/nickname_observer.py">chat/nickname_observer.py</a></li>
<li><a href="http://gitlab.bitdust.io/devel/bitpie.devel/blob/master/chat/message.py">chat/message.py</a></li>
</ul>
<br>
<br>
</div>
</body>
</html>