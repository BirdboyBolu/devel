<!DOCTYPE html>
<html lang='ru'>
<head>
<title>
services\service_customer_patrol
</title>
<link rel="stylesheet" type="text/css" href="../styles.css">
</head>
<body>
<div id="content">
<h1>Сервис customer_patrol()</h1>
<h2>Описание</h2>
<p>Сетевая служба <code>customer_patrol()</code> следит за клиентами пользователя и за объемами загруженных файлов
на его жесткий диск с других узлов. 
При изменении размера выделенного пространства, отданного в сеть BitPie.NET, производится проверка
общего объема уже использованного пространства и выполняются необходимые действия 
для контроля использования дисковых рессурсов. </p>
<p>В момент старта службы, запускается автомат <code>customers_rejector()</code> - он отслеживает корректность
выделения пространства и размещения файлов на жестком диске пользователя.
В случае если клиенты используют больше пространства чем пользователь разрешил у себя забрать,
часть клиентов увольняется и пространство на диске очищается. 
В первую очередь будут уволены те клиенты, которые меньше других заполнили свои зарезервированные
хранилища.</p>
<p>Когда этот сетевой сервис активен, ядро клиентского ПО BitPie.NET периодически запускает подпроцесс
<code>bptester</code>, который проверяет файлы в папке <code>.bitpie/customers/</code>. Выполняются следующие тесты
над хранимыми данными:</p>
<ul>
<li><code>validate</code> - проверка электронной подписи владельца данных</li>
<li><code>update_customers</code> - хранимые данные принадлежат активным клиентам</li>
<li><code>space_time</code> - объем хранимых данных не выходит за размер выделенной квоты, более ранние файлы будут удалены</li>
</ul>
<p>При отключении службы <code>customer_patrol()</code>, будет происходить "замусоривание" диска пользователя,
настоятельно рекомендуется поддерживать ее активной все время.</p>
<h2>Зависит от</h2>
<ul>
<li><a href="../services/service_supplier.html">supplier()</a></li>
</ul>
<h2>Запуск автоматов</h2>
<ul>
<li><a href="../supplier/customers_rejector.html">customers_rejector()</a></li>
</ul>
<h2>Настройки сервиса</h2>
<ul>
<li>services/customer-patrol/enabled - включение/выключение сервиса <code>customer_patrol()</code></li>
</ul>
<h2>Связанные файлы проекта</h2>
<ul>
<li><a href="http://gitlab.bitpie.net/devel/bitpie.devel/blob/master/services/service_customer_patrol.py">service/service_customer_patrol.py</a></li>
<li><a href="http://gitlab.bitpie.net/devel/bitpie.devel/blob/master/supplier/customers_rejector.py">supplier/customers_rejector.py</a></li>
<li><a href="http://gitlab.bitpie.net/devel/bitpie.devel/blob/master/supplier/local_tester.py">supplier/local_tester.py</a></li>
<li><a href="http://gitlab.bitpie.net/devel/bitpie.devel/blob/master/main/bptester.py">main/bptester.py</a></li>
</ul>
<br>
<br>
</div>
</body>
</html>