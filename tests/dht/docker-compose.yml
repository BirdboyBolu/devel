version: "3.4"

x-common: &common
  context: ./../../

services:

  app:
    image: bitdust_perf/app
    build:
      <<: *common
      dockerfile: regress/Dockerfiles/app/Dockerfile
    environment:
      dht_seeds: genesis
      delayed: 0

  genesis:
    image: bitdust_perf/app
    build:
      context: .
    environment:
      dht_seeds: genesis
      delayed: 0

  seed1:
    image: bitdust_perf/app
    build:
      context: .
    environment:
      dht_seeds: genesis:14441
      delayed: 1

  seed2:
    image: bitdust_perf/app
    build:
      context: .
    environment:
      dht_seeds: genesis:14441
      delayed: 5

  seed3:
    image: bitdust_perf/app
    build:
      context: .
    environment:
      dht_seeds: genesis:14441
      delayed: 10

  seed4:
    image: bitdust_perf/app
    build:
      context: .
    environment:
      dht_seeds: genesis:14441
      delayed: 15

  node1:
    image: bitdust_perf/app
    build:
      context: .
    environment:
      delayed: 20

  node2:
    image: bitdust_perf/app
    build:
      context: .
    environment:
      delayed: 20

  node3:
    image: bitdust_perf/app
    build:
      context: .
    environment:
      delayed: 20

  node4:
    image: bitdust_perf/app
    build:
      context: .
    environment:
      delayed: 20

  producer:
    image: bitdust_perf/producer
    build:
      context: .
      dockerfile: Dockerfile_producer

  consumer:
    image: bitdust_perf/consumer
    build:
      context: .
      dockerfile: Dockerfile_consumer
