# Сервис backup_db()


## Описание
Прежде чем загрузить данные на хранителей, нужно указать в программе их
местоположение на жестком диске пользователя. В ПО BitPie.NET хранится каталог добавленных пользователем
локальных путей, из которых ведется чтение данных для разбиения на блоки и записи на машины хрантелей.
Пользователь может указать как отдельный файл так и целую папку с возможностью рекурсивного добавления
всех подпапок и файлов в каталог.

Сетевой сервис `backup_db()` позволяет зашифровать и записать этот каталог на машины хранителей
и восстановить его в случае необходимости. Это позволит восоздать имена файлов и каталогов
в момент восстановления данных с хранителей, если локальный каталог был утерян или пользователь скачивает
личные данные на другой машине.

В момент создания распределенной копии данных, генерируется специальный идентификатор, под которым
эти данные размещаются на машинах хранителей. Эти идентификаторы записываются в каталог и используется 
при скачивания уже размещенных в сети данных. 

Экземпляр автомата `backup_db_keeper()` создается при старте сервиса и синхронизирует локальный каталог
пользователя с копией каталога записанной на машины хранителей.

При отключении службы `backup_db()` будет прекращено поддержание копии каталога сохраненных данных.
Рано или поздно будет потеряна возможность восстановления данных, 
так как идентификаторы закачанных данных будут утеряны.


## Зависит от
* [list_files()](services/service_list_files.md)
* [data_motion()](services/service_data_sender.md)


## Запуск автоматов
* [backup_db_keeper()](storage/backup_db_keeper.md)


## Настройки сервиса
* services/backup-db/enabled - включение/выключение сервиса `backup_db()`


## Связанные файлы проекта
* [services/service_backup_db.py](services/service_backup_db.py)
* [storage/backup_db_keeper.py](storage/backup_db_keeper.py)


